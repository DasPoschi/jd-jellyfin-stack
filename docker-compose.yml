version: "3.8"

services:
  jdownloader:
    image: ${JD_IMAGE}
    container_name: ${JD_CONTAINER_NAME}
    restart: unless-stopped
    ports:
      - "${JD_WEB_PORT}:5800"
    environment:
      TZ: ${TZ}
    volumes:
      - ./data/jd-config:/config
      - ./data/jd-output:/output

  jd-webgui:
    build: ./jd-webgui
    container_name: ${WEBGUI_CONTAINER_NAME}
    restart: unless-stopped
    depends_on:
      - jdownloader
    ports:
      - "${WEBGUI_PORT}:8080"
    env_file:
      - .env
    environment:
      TZ: ${TZ}
    volumes:
      - ./data/jd-output:/output:ro
      - ./data/md5:/md5:rw
      - ${SSH_KEY_PATH}:/ssh/id_ed25519:ro
